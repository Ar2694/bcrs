<div fxLayout="column" class="main-container">
  <mat-card fxFlex class="mat-elevation-z8 registration-form">
    <mat-card-title style="text-align: center; font-weight: lighter;">
      Account Registration
    </mat-card-title>

    <!-- error message -->
    <mat-card *ngIf="errorMessage" class="mat-elevation-z0" style="width: 75%;">
      <mat-card-content>
        <div style="font-weight: lighter;">
          {{ errorMessage }}
          <br>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Start of the stepper for account registration -->
    <form [formGroup]="registrationForm">
      <mat-card-content fxLayout="column" fxLayoutGap="10px">
        <mat-horizontal-stepper #stepper>
          <!-- Step 1 - contact information -->
          <mat-step fxFlex formGroupName="contactInformation"
                    [stepControl]="registrationForm.get('contactInformation')">
            <ng-template matStepLabel>Contact Information</ng-template>

            <!-- content inside contact information -->
            <mat-list>
              <mat-list-item>
                <mat-form-field fxFlex>
                  <input matInput formControlName="firstname"
                         placeholder="First name"/>
                </mat-form-field>

                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <mat-form-field fxFlex>
                  <input matInput formControlName="lastname"
                         placeholder="Last name"/>
                </mat-form-field>
              </mat-list-item>

              <mat-list-item>
                <mat-form-field fxFlex>
                  <input matInput formControlName="phoneNumber"
                         placeholder="Phone number"/>
                </mat-form-field>

                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <mat-form-field fxFlex>
                  <input matInput  formControlName="email"
                         placeholder="Email"/>
                </mat-form-field>
              </mat-list-item>

              <br><br><br>

              <mat-list-item>
                <mat-form-field fxFlex>
                  <input matInput formControlName="address"
                            placeholder="Address">
                </mat-form-field>
              </mat-list-item>
            </mat-list>

            <br><br><br>

            <div fxLayoutAlign="end" fxFlex>
              <button mat-raised-button color="accent" matStepperNext>
                Next
              </button>
            </div>
          </mat-step>

          <!-- Step 2 - choosing security questions and writing answers -->
          <mat-step formGroupName="SecurityQuestions"
                    [stepControl]="registrationForm.get('SecurityQuestions')">
            <ng-template matStepLabel>Security Questions</ng-template>

            <mat-list>
              <mat-list-item>
                <mat-form-field fxFlex>
                  <mat-select formControlName="SecurityQuestion1"
                              placeholder="Security question">
                    <mat-option *ngFor="let question of SecurityQuestions"
                                [value]="question.text">
                        {{ question.text }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>

                &nbsp;&nbsp;&nbsp;&nbsp;
                <mat-form-field fxFlex>
                  <input matInput
                         formControlName="AnswerToSecurityQuestion1"
                         placeholder="Answer 1"/>
                </mat-form-field>
              </mat-list-item>

              <mat-list-item>
                <mat-form-field fxFlex>
                  <mat-select formControlName="SecurityQuestion2"
                              placeholder="Security question">
                    <mat-option *ngFor="let question of SecurityQuestions"
                                [value]="question.text">
                        {{ question.text }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>

                &nbsp;&nbsp;&nbsp;&nbsp;
                <mat-form-field fxFlex>
                  <input matInput
                         formControlName="AnswerToSecurityQuestion2"
                         placeholder="Answer 2"/>
                </mat-form-field>
              </mat-list-item>

              <mat-list-item>
                <mat-form-field fxFlex>
                  <mat-select formControlName="SecurityQuestion3"
                              placeholder="Security question">
                    <mat-option *ngFor="let question of SecurityQuestions"
                                [value]="question.text">
                        {{ question.text }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>

                &nbsp;&nbsp;&nbsp;&nbsp;
                <mat-form-field fxFlex>
                  <input matInput
                         formControlName="AnswerToSecurityQuestion3"
                         placeholder="Answer 3"/>
                </mat-form-field>
              </mat-list-item>
            </mat-list>

            <div fxLayoutAlign="end">
              <button mat-raised-button color="accent" matStepperPrevious>Back</button>&nbsp;
              <button mat-raised-button color="accent" matStepperNext>Next</button>
            </div>
          </mat-step>

          <!-- Step 3 - for creation of username and password -->
          <mat-step formGroupName="credentials" [stepControl]="registrationForm.get('credentials')">
            <ng-template matStepLabel>Credentials</ng-template>

            <mat-list>
              <mat-list-item>
                <mat-form-field fxFlex>
                  <input matInput type='text' formControlName="username"
                         placeholder="Username"/>
                </mat-form-field>
              </mat-list-item>

              <mat-list-item>
                <mat-form-field fxFlex>
                  <input matInput type='password' formControlName="password"
                         placeholder="Password"/>
                </mat-form-field>
              </mat-list-item>
              <mat-card-subtitle class="password-requirements" color='accent'>
                  Must contain at least one capital letter
                  <br>
                  Must contain a minimum of six characters
              </mat-card-subtitle>
            </mat-list>

            <!-- buttons for previous and register -->
            <div fxLayoutAlign="end">
              <button mat-raised-button color="accent" matStepperPrevious>Back</button>&nbsp;
              <button mat-raised-button (click)="register(registrationForm.value)"color="accent"
                      [disabled]="!registrationForm.valid"
                      type="submit">Submit
              </button>
            </div>
          </mat-step>
        </mat-horizontal-stepper>
        <a routerLink="/" class="return">Return</a>
      </mat-card-content>
    </form>
  </mat-card>
</div>
